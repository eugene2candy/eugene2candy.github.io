---
layout: post
title: "WINDOWS 8系统安全之我所见/PART 2：安全启动"
date: 2013-10-21 15:35
author: sonjasper
comments: true
categories: []
tags: []
---
<span style="color: #ff0000;">基于UEFI的安全启动</span>
**旧有的**启动进程如下所示：
BIOS----OS加载程序----OS启动（这种启动方式的危害在于BIOS启动包括了恶意软件在内的任何OS加载程序，恶意程序在系统启动前就已经启动了）
**现在的**启动进程如下所示：
本机UEFI----只限经过验证的OS加载程序----OS启动（此方式基于固件执行策略，也就是说只会启动经过签名验证的OS加载程序，如果验证失败，受信任启动会出发一个修正进程，然后恶意软件就无法启动了）

<span style="color: #ff0000;">Win8安全启动的实现要求如下：</span>
UEFI 2.3.1固件
已填充签名的数据库
已禁止签名的数据库
由微软提供的私密加密秘钥
经过正确格式化的公钥
初始签名集

<span style="color: #ff0000;">Win8安全启动的说明：</span>
1.内核级的安全功能，与用户模式无关。
2.Win8徽标认证计划需要安全启动功能。
3.用户可以查看
HKLMSYSTEMCurrentControlSetControlSecureBootStateUEFISecureBootEnabled
注册表项是否包含值“1”，从而确定安全启动功能是否正常启动。
4.所有修正工作都会被记录进系统事件日志。

<span style="color: #ff0000;">针对系统安全启动功能的修正：</span>
1. 启动进程检测到损坏的关键启动文件时将触发修正的工作
2. 在Windows修复环境中启动，更正二进制
3. 从Windows部件存储（Windowswinsxs）更换损坏的二进制
4. 如果部件存储中的二进制也损坏了，箱内损坏修复进程启动

<span style="color: #ff0000;">ELAM（预先启动反恶意软件支持）：</span>
1. 自OS加载程序启动后第一个启动的内核模式驱动程序
2. ELAM作为安装例程的一部分被ISV启用，并且由组策略管理
3. 相关GPO存储位置：administrative/templates/system/early launch antimalware
在Win7中：
BIOS----OS加载程序----第三方驱动----反恶意软件启动----OS登录
（在反恶意软件启动之前，恶意软件已经被启动了，这就有可能在反恶意软件启动前，就已经把系统破坏了）
在Win8中：
本地UEFI----Win8 OS加载程序----Windows中心内核/反恶意软件启动----第三方驱动----OS登录
（显而易见，Win8中恶意程序无法通过安全验证进而无法启动，系统启动并保护了基于ELAM的反恶意软件，如果后续发生问题，系统也可以自动修正）

<span style="color: #ff0000;">ELAM的存在，</span>
1.可以让系统发生故障的时候，系统将会生成一个故障转储文件。此文件可以被用于Windows恢复环境中，用于确定故障的原因所在。
2.ELAM驱动程序安装后，一个备份版本将会被拷贝到
HKEY_LOCAL_MACHINESYSTEMCURRENTCONTROLSETCONTROLEARLYLAUNCH
3.恶意软件签名由反恶意软件提供商提供，但是应该包含至少一个白名单的驱动程序哈希。

<span style="color: #ff0000;">GPO选项：</span>
1.只限合格驱动程序
2.合格和未知驱动程序
3.合格、已知、不合格的关键驱动程序
如果反恶意软件驱动程序部包含一个引导启动组件，那么即便组策略经过配置了，那么策略也会让该配置被忽略。

<span style="color: #ff0000;">Win8的测量启动：</span>
1.在Win8中推出了一项功能，用于就所有在启动期间启动的部件以及安全敏感信息创建一份启动日志。
2.安全启动为一项前摄性功能，测量启动是启动环境保护的反应式形式。
3.TPM为必选的项目，UEFI为可选项。

<span style="color: #ff0000;">测量启动的工作流程如下：</span>
1. 测量硬件与启动部件
2. 测量Windows内核
3. 反恶意软件被作为第一项内核模式驱动程序启动
4. 反恶意软件发布一个队进程的状况检查
5. 确认启动测量结果，发现问题后，在可行的前提下执行修正

<span style="color: #ff0000;">测量启动的配置需求：</span>
1. 必须装有并且激活了TPM芯片
2. 建议一个服务器与客户端相连的AIK
3. 打开启动测量
4. 安装带有引导启动驱动程序的反恶意软件组件
5. 安装可以与远程服务器进行通讯的客户端组件

<span style="color: #ff0000;">Win8系统安全启动完整叙述：</span>
1. 安全启动（UEFI）防止系统运行一个未知的OS加载程序
2. 内核启动预先启动反恶意软件（ELAM），启动执行第三方驱动程序和应用程序
3. 系统启动状态测量结果在启动期间被记录到了TPM
4. 为证明客户端运行状态是否良好，反恶意软件可以将TPM测量结果引述到远程检验器

（博主版权所有未经同意禁止转载）
